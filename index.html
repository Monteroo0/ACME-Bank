<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Acme Bank - Inicio de Sesión</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>

  <div class="container">

    <img src="logo.png" alt="Logo Acme Bank" class="logo" />

    <form id="loginForm" class="form-login">
      <fieldset>
        <legend>Iniciar Sesión</legend>

        <label for="tipoIdentificacion">Tipo de Identificación:</label>
        <select id="tipoIdentificacion" name="tipoIdentificacion" required>
          <option value="">Seleccione</option>
          <option value="CC">Cédula de Ciudadanía</option>
          <option value="CE">Cédula de Extranjería</option>
          <option value="TI">Tarjeta de Identidad</option>
          <option value="NIT">NIT</option>
        </select>

        <label for="numeroIdentificacion">Número de Identificación:</label>
        <input type="text" id="numeroIdentificacion" name="numeroIdentificacion" required />

        <label for="contrasena">Contraseña:</label>
        <input type="password" id="contrasena" name="contrasena" required />

        <a href="recover.html" class="link-recover">¿Olvidaste tu contraseña?</a>

        <button type="submit" class="btn-primary">Iniciar Sesión</button>
      </fieldset>
    </form>

    <div class="separator">O</div>

    <form action="register.html">
      <button type="submit" class="btn-secondary">Registrarse</button>
    </form>

    <p id="mensajeError" class="mensaje-error"></p>

  </div>

  <script>
    const form = document.getElementById('loginForm');
    const mensajeError = document.getElementById('mensajeError');

    form.addEventListener('submit', function (e) {
      e.preventDefault();

      const tipo = document.getElementById('tipoIdentificacion').value;
      const numero = document.getElementById('numeroIdentificacion').value;
      const pass = document.getElementById('contrasena').value;

      const usuarios = JSON.parse(localStorage.getItem('usuarios')) || {};
      const usuario = usuarios[numero];

      if (usuario && usuario.tipoIdentificacion === tipo && usuario.contrasena === pass) {
        localStorage.setItem('usuarioActivo', numero);
        window.location.href = 'dashboard.html';
      } else {
        mensajeError.textContent = 'Credenciales incorrectas. No se pudo validar su identidad.';
      }
    });
  </script>

</body>
</html>
